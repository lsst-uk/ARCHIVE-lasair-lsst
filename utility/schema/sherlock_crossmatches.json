{
  "namespace": "ztf.alert",
  "name": "sherlock_crossmatches",
  "doc": "avro alert schema",
  "version": "3.3",
  "type": "record",
  "fields": [
    {
      "name": "objectId",
      "type": "string",
      "extra": "CHARACTER SET utf8 COLLATE utf8_unicode_ci",
      "doc": "ZTF object identifier"
    },
    {
      "name": "catalogue_object_id",
      "type": "string",
      "doc": "The UUID of the matched source from the original catalogue (all converted to strings)"
    },
    {
      "name": "catalogue_table_id",
      "type": "int",
      "doc": "The unique ID of the table in Sherlock's catalogue database"
    },
    {
      "name": "separationArcsec",
      "type": "float",
      "doc": "angular separation (arcseconds) of the matched catalogue source from the transient position"
    },
    {
      "name": "northSeparationArcsec",
      "type": "float",
      "doc": "How far north the matched source is located from the transient position (arcseconds)"
    },
    {
      "name": "eastSeparationArcsec",
      "type": "float",
      "doc": "How far east the matched source is located from the transient position (arcseconds)"
    },
    {
      "name": "id",
      "type": "bigint",
      "doc": "Auto-incrementing Primary Key (UUID) of `sherlock_crossmatches` tables (mainly used for book-keeping proposes)"
    },
    {
      "name": "z",
      "type": "float",
      "doc": "Catalogue source redshift"
    },
    {
      "name": "scale",
      "type": "float",
      "doc": "Distance Scale: Physical-Angular Scale Ratio at inferred distance of the matched source (kpc/arcsec)"
    },
    {
      "name": "distance",
      "type": "float",
      "doc": "Inferred distance to catalogued source (generally a convertion from redshift)"
    },
    {
      "name": "distance_modulus",
      "type": "float",
      "doc": "Distance modulus given inferred distance"
    },
    {
      "name": "photoZ",
      "type": "float",
      "doc": "Photometrically measured redshift"
    },
    {
      "name": "photoZErr",
      "type": "float",
      "doc": "Error in photometric redshift"
    },
    {
      "name": "association_type",
      "type": "string",
      "doc": "The type assigned to the transient given the nature of the associated catalogue source"
    },
    {
      "name": "physical_separation_kpc",
      "type": "float",
      "doc": "Physical separation of the catalogued source from the transient position (kpc)"
    },
    {
      "name": "catalogue_object_type",
      "type": "string",
      "doc": "The reported type of the catalogued source"
    },
    {
      "name": "catalogue_object_subtype",
      "type": "string",
      "doc": "The reported sub-type of the catlagoued source (if given)"
    },
    {
      "name": "association_rank",
      "type": "int",
      "doc": "redundant column"
    },
    {
      "name": "catalogue_table_name",
      "type": "bigstring",
      "doc": "The human-readable name of the source's parent catalogue"
    },
    {
      "name": "rank",
      "type": "int",
      "doc": "The rank of the source-transient association realtive to other matches (based on the `rankScore`). Note one rank is give per unique astrophysical source."
    },
    {
      "name": "rankScore",
      "type": "float",
      "doc": "A measurement of the accuracy of the source's association with the transient weighted by the quality of data in the catalogue and the nearness to the transient location (float)"
    },
    {
      "name": "search_name",
      "type": "bigstring",
      "doc": "The name of the search-module used by Sherlock to make this assoication (from yaml algorithm)"
    },
    {
      "name": "major_axis_arcsec",
      "type": "float",
      "doc": "Diameter of the semi-major axis (if given)"
    },
    {
      "name": "direct_distance",
      "type": "float",
      "doc": "Direct distance to catalogued source (redshift-independent and therefore more accurate than `distance` column)"
    },
    {
      "name": "direct_distance_scale",
      "type": "float",
      "doc": "Distance Scale: Physical-Angular Scale Ratio at *direct* distance of the matched source (kpc/arcsec)"
    },
    {
      "name": "direct_distance_modulus",
      "type": "float",
      "doc": "Distance modulus given *direct* distance"
    },
    {
      "name": "raDeg",
      "type": "double",
      "doc": "Right Ascension of the catalogue source"
    },
    {
      "name": "decDeg",
      "type": "double",
      "doc": "Declination of the catalogue source"
    },
    {
      "name": "original_search_radius_arcsec",
      "type": "float",
      "doc": "The search radius used by Sherlock to make this association (arcseconds)"
    },
    {
      "name": "catalogue_view_id",
      "type": "int",
      "doc": "The unique ID of the table-view in Sherlock's catalogue database"
    },
    {"name": "_u", "type": "float", "doc":"u magnitude"}, {"name": "_uErr", "type": "float", "doc":"u magnitude error"},
    {"name": "_g", "type": "float", "doc":"g magnitude"}, {"name": "_gErr", "type": "float", "doc":"g magnitude error"},
    {"name": "_r", "type": "float", "doc":"r magnitude"}, {"name": "_rErr", "type": "float", "doc":"r magnitude error"},
    {"name": "_i", "type": "float", "doc":"i magnitude"}, {"name": "_iErr", "type": "float", "doc":"i magnitude error"},
    {"name": "_z", "type": "float", "doc":"z magnitude"}, {"name": "_zErr", "type": "float", "doc":"z magnitude error"},
    {"name": "_y", "type": "float", "doc":"y magnitude"}, {"name": "_yErr", "type": "float", "doc":"y magnitude error"},

    {"name": "U",  "type": "float", "doc":"U magnitude"}, {"name":  "UErr", "type": "float", "doc":"U magnitude error"},
    {"name": "B",  "type": "float", "doc":"B magnitude"}, {"name":  "BErr", "type": "float", "doc":"B magnitude error"},
    {"name": "V",  "type": "float", "doc":"V magnitude"}, {"name":  "VErr", "type": "float", "doc":"V magnitude error"},
    {"name": "R",  "type": "float", "doc":"R magnitude"}, {"name":  "RErr", "type": "float", "doc":"R magnitude error"},
    {"name": "I",  "type": "float", "doc":"I magnitude"}, {"name":  "IErr", "type": "float", "doc":"I magnitude error"},

    {"name": "J",  "type": "float", "doc":"J magnitude"}, {"name":  "JErr", "type": "float", "doc":"J magnitude error"},
    {"name": "H",  "type": "float", "doc":"H magnitude"}, {"name":  "HErr", "type": "float", "doc":"H magnitude error"},
    {"name": "K",  "type": "float", "doc":"K magnitude"}, {"name":  "KErr", "type": "float", "doc":"K magnitude error"},
    {"name": "G",  "type": "float", "doc":"G magnitude"}, {"name":  "GErr", "type": "float", "doc":"G magnitude error"},
    {
      "name": "classificationReliability",
      "type": "int",
      "doc": "An indication of the transient classification reliability. 1 = synonym, 2 = association, 3. annotation"
    },
    {
      "name": "transientAbsMag",
      "type": "float",
      "doc": "The peak absolute magnitude of the transient given the best distance measurement to the associated source"
    },
    {
      "name": "merged_rank",
      "type": "int",
      "doc": "Some sources are reported across multiple catalogues. The `rank` column reports the rank of the unique astrophysical source. This `merged_rank` column reveals the entries that were combined to make the single combined row. For example a unique astrophysical source might be found in 5 catalogues, the best data from these 5 catalogues is merged into one row and given a `rank` of 1. The individual entries are also reported and given the `merged_rank` of 1. If `rank` != null, `merged_rank` = null and vice-versa"
    }
  ],
  "indexes": [
    "PRIMARY KEY (`id`)",
    "KEY `key_objectId` (`objectId`)"
  ]
}
